<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Testing | Eversoft Coding Standard</title><meta data-react-helmet="true" property="og:url" content="https://eversoft-group.github.io/coding-standard/docs/testing/testring-and-overall-quality-practice"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Testing | Eversoft Coding Standard"><meta data-react-helmet="true" name="description" content="At the very least, write API (component) testing"><meta data-react-helmet="true" property="og:description" content="At the very least, write API (component) testing"><link data-react-helmet="true" rel="shortcut icon" href="/coding-standard/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://eversoft-group.github.io/coding-standard/docs/testing/testring-and-overall-quality-practice"><link data-react-helmet="true" rel="alternate" href="https://eversoft-group.github.io/coding-standard/docs/testing/testring-and-overall-quality-practice" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://eversoft-group.github.io/coding-standard/docs/testing/testring-and-overall-quality-practice" hreflang="x-default"><link rel="stylesheet" href="/coding-standard/assets/css/styles.b121cd8c.css">
<link rel="preload" href="/coding-standard/assets/js/runtime~main.e702cba1.js" as="script">
<link rel="preload" href="/coding-standard/assets/js/main.662322e1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/coding-standard/"><img src="https://eversoftgroup.com/wp-content/uploads/2020/10/png-logo-of-eversoft-group.png" alt="Eversoft Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="https://eversoftgroup.com/wp-content/uploads/2020/10/png-logo-of-eversoft-group.png" alt="Eversoft Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Eversoft Coding Standard</b></a><a class="navbar__item navbar__link navbar__link--active" href="/coding-standard/docs/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/coding-standard/docs/intro">Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Project Structure</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Naming Conventions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Function Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Javascript Coding Standard</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Error Handling Practices</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Testing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/coding-standard/docs/testing/testring-and-overall-quality-practice">Testing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/coding-standard/docs/going-to-production-practices">Going To Production</a></li><li class="menu__list-item"><a class="menu__link" href="/coding-standard/docs/security-practices">Security Practices</a></li><li class="menu__list-item"><a class="menu__link" href="/coding-standard/docs/docker-practices">Docker Practices</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Testing</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="at-the-very-least-write-api-component-testing"></a>At the very least, write API (component) testing<a class="hash-link" href="#at-the-very-least-write-api-component-testing" title="Direct link to heading">#</a></h2><p>Most projects just don&#x27;t have any automated testing due to short timetables or often the &#x27;testing project&#x27; ran out of control and was abandoned. For that reason, prioritize and start with API testing which is the easiest way to write and provides more coverage than unit testing (you may even craft API tests without code using tools like <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman</a>). Afterward, should you have more resources and time, continue with advanced test types like unit testing, DB testing, performance testing, etc</p><p><strong>Otherwise:</strong> You may spend long days on writing unit tests to find out that you got only 20% system coverage</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="include-3-parts-in-each-test-name"></a>Include 3 parts in each test name<a class="hash-link" href="#include-3-parts-in-each-test-name" title="Direct link to heading">#</a></h2><p>Make the test speak at the requirements level so it&#x27;s self-explanatory also to QA engineers and developers who are not familiar with the code internals. State in the test name what is being tested (unit under test), under what circumstances, and what is the expected result</p><p><strong>Otherwise:</strong> A deployment just failed, a test named ‚ÄúAdd product‚Äù failed. Does this tell you what exactly is malfunctioning?</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="structure-tests-by-the-aaa-pattern"></a>Structure tests by the AAA pattern<a class="hash-link" href="#structure-tests-by-the-aaa-pattern" title="Direct link to heading">#</a></h2><p>Structure your tests with 3 well-separated sections: Arrange, Act &amp; Assert (AAA). The first part includes the test setup, then the execution of the unit under test, and finally the assertion phase. Following this structure guarantees that the reader spends no brain CPU on understanding the test plan</p><p><strong>Otherwise:</strong> Not only you spend long daily hours on understanding the main code, but now also what should have been the simple part of the day (testing) stretches your brain</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-detect-code-issues-with-a-linter"></a>4 Detect code issues with a linter<a class="hash-link" href="#4-detect-code-issues-with-a-linter" title="Direct link to heading">#</a></h2><p>Use a code linter to check the basic quality and detect anti-patterns early. Run it before any test and add it as a pre-commit git-hook to minimize the time needed to review and correct any issue. Also check <a href="#3-code-style-practices">Section 3</a> on Code Style Practices</p><p><strong>Otherwise:</strong> You may let pass some anti-pattern and possible vulnerable code to your production environment.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="avoid-global-test-fixtures-and-seeds-add-data-per-test"></a>Avoid global test fixtures and seeds, add data per-test<a class="hash-link" href="#avoid-global-test-fixtures-and-seeds-add-data-per-test" title="Direct link to heading">#</a></h2><p>To prevent test coupling and easily reason about the test flow, each test should add and act on its own set of DB rows. Whenever a test needs to pull or assume the existence of some DB data - it must explicitly add that data and avoid mutating any other records</p><p><strong>Otherwise:</strong> Consider a scenario where deployment is aborted due to failing tests, team is now going to spend precious investigation time that ends in a sad conclusion: the system works well, the tests however interfere with each other and break the build</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constantly-inspect-for-vulnerable-dependencies"></a>Constantly inspect for vulnerable dependencies<a class="hash-link" href="#constantly-inspect-for-vulnerable-dependencies" title="Direct link to heading">#</a></h2><p>Even the most reputable dependencies such as Express have known vulnerabilities. This can get easily tamed using community and commercial tools such as üîó <a href="https://docs.npmjs.com/cli/audit" target="_blank" rel="noopener noreferrer">npm audit</a> and üîó <a href="https://snyk.io" target="_blank" rel="noopener noreferrer">snyk.io</a> that can be invoked from your CI on every build</p><p><strong>Otherwise:</strong> Keeping your code clean from vulnerabilities without dedicated tools will require to constantly follow online publications about new threats. Quite tedious</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tag-your-tests"></a>Tag your tests<a class="hash-link" href="#tag-your-tests" title="Direct link to heading">#</a></h2><p>Different tests must run on different scenarios: quick smoke, IO-less, tests should run when a developer saves or commits a file, full end-to-end tests usually run when a new pull request is submitted, etc. This can be achieved by tagging tests with keywords like #cold #api #sanity so you can grep with your testing harness and invoke the desired subset. For example, this is how you would invoke only the sanity test group with <a href="https://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a>: mocha --grep &#x27;sanity&#x27;</p><p><strong>Otherwise:</strong> Running all the tests, including tests that perform dozens of DB queries, any time a developer makes a small change can be extremely slow and keeps developers away from running tests</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check-your-test-coverage-it-helps-to-identify-wrong-test-patterns"></a>Check your test coverage, it helps to identify wrong test patterns<a class="hash-link" href="#check-your-test-coverage-it-helps-to-identify-wrong-test-patterns" title="Direct link to heading">#</a></h2><p>Code coverage tools like <a href="https://github.com/istanbuljs/istanbuljs" target="_blank" rel="noopener noreferrer">Istanbul</a>/<a href="https://github.com/istanbuljs/nyc" target="_blank" rel="noopener noreferrer">NYC</a> are great for 3 reasons: it comes for free (no effort is required to benefit this reports), it helps to identify a decrease in testing coverage, and last but not least it highlights testing mismatches: by looking at colored code coverage reports you may notice, for example, code areas that are never tested like catch clauses (meaning that tests only invoke the happy paths and not how the app behaves on errors). Set it to fail builds if the coverage falls under a certain threshold</p><p><strong>Otherwise:</strong> There won&#x27;t be any automated metric telling you when a large portion of your code is not covered by testing</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="inspect-for-outdated-packages"></a>Inspect for outdated packages<a class="hash-link" href="#inspect-for-outdated-packages" title="Direct link to heading">#</a></h2><p>Use your preferred tool (e.g. <code>npm outdated</code> or <a href="https://www.npmjs.com/package/npm-check-updates" target="_blank" rel="noopener noreferrer">npm-check-updates</a>) to detect installed outdated packages, inject this check into your CI pipeline and even make a build fail in a severe scenario. For example, a severe scenario might be when an installed package is 5 patch commits behind (e.g. local version is 1.3.1 and repository version is 1.3.8) or it is tagged as deprecated by its author - kill the build and prevent deploying this version</p><p><strong>Otherwise:</strong> Your production will run packages that have been explicitly tagged by their author as risky</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-production-like-environment-for-e2e-testing"></a>Use production-like environment for e2e testing<a class="hash-link" href="#use-production-like-environment-for-e2e-testing" title="Direct link to heading">#</a></h2><p>End to end (e2e) testing which includes live data used to be the weakest link of the CI process as it depends on multiple heavy services like DB. Use an environment which is as close to your real production environment as possible like a-continue (Missed -continue here, needs content. Judging by the <strong>Otherwise</strong> clause, this should mention docker-compose)</p><p><strong>Otherwise:</strong> Without docker-compose, teams must maintain a testing DB for each testing environment including developers&#x27; machines, keep all those DBs in sync so test results won&#x27;t vary across environments</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="refactor-regularly-using-static-analysis-tools"></a>Refactor regularly using static analysis tools<a class="hash-link" href="#refactor-regularly-using-static-analysis-tools" title="Direct link to heading">#</a></h2><p>Using static analysis tools helps by giving objective ways to improve code quality and keeps your code maintainable. You can add static analysis tools to your CI build to fail when it finds code smells. Its main selling points over plain linting are the ability to inspect quality in the context of multiple files (e.g. detect duplications), perform advanced analysis (e.g. code complexity), and follow the history and progress of code issues. Two examples of tools you can use are <a href="https://www.sonarqube.org/" target="_blank" rel="noopener noreferrer">Sonarqube</a> (2,600+ <a href="https://github.com/SonarSource/sonarqube" target="_blank" rel="noopener noreferrer">stars</a>) and <a href="https://codeclimate.com/" target="_blank" rel="noopener noreferrer">Code Climate</a> (1,500+ <a href="https://github.com/codeclimate/codeclimate" target="_blank" rel="noopener noreferrer">stars</a>).</p><p><strong>Otherwise:</strong> With poor code quality, bugs and performance will always be an issue that no shiny new library or state of the art features can fix</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="carefully-choose-your-ci-platform-jenkins-vs-circleci-vs-travis-vs-rest-of-the-world"></a>Carefully choose your CI platform (Jenkins vs CircleCI vs Travis vs Rest of the world)<a class="hash-link" href="#carefully-choose-your-ci-platform-jenkins-vs-circleci-vs-travis-vs-rest-of-the-world" title="Direct link to heading">#</a></h2><p>Your continuous integration platform (CICD) will host all the quality tools (e.g. test, lint) so it should come with a vibrant ecosystem of plugins. <a href="https://jenkins.io/" target="_blank" rel="noopener noreferrer">Jenkins</a> used to be the default for many projects as it has the biggest community along with a very powerful platform at the price of a complex setup that demands a steep learning curve. Nowadays, it has become much easier to set up a CI solution using SaaS tools like <a href="https://circleci.com" target="_blank" rel="noopener noreferrer">CircleCI</a> and others. These tools allow crafting a flexible CI pipeline without the burden of managing the whole infrastructure. Eventually, it&#x27;s a trade-off between robustness and speed - choose your side carefully</p><p><strong>Otherwise:</strong> Choosing some niche vendor might get you blocked once you need some advanced customization. On the other hand, going with Jenkins might burn precious time on infrastructure setup</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="test-your-middlewares-in-isolation"></a>Test your middlewares in isolation<a class="hash-link" href="#test-your-middlewares-in-isolation" title="Direct link to heading">#</a></h2><p>When a middleware holds some immense logic that spans many requests, it is worth testing it in isolation without waking up the entire web framework. This can be easily achieved by stubbing and spying on the {req, res, next} objects</p><p><strong>Otherwise:</strong> A bug in Express middleware === a bug in all or most requests</p><br></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/testing/testring-and-overall-quality-practice.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/coding-standard/docs/error-handling-practices/error-handling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Error Handling</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/coding-standard/docs/going-to-production-practices"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Going To Production ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#at-the-very-least-write-api-component-testing" class="table-of-contents__link">At the very least, write API (component) testing</a></li><li><a href="#include-3-parts-in-each-test-name" class="table-of-contents__link">Include 3 parts in each test name</a></li><li><a href="#structure-tests-by-the-aaa-pattern" class="table-of-contents__link">Structure tests by the AAA pattern</a></li><li><a href="#4-detect-code-issues-with-a-linter" class="table-of-contents__link">4 Detect code issues with a linter</a></li><li><a href="#avoid-global-test-fixtures-and-seeds-add-data-per-test" class="table-of-contents__link">Avoid global test fixtures and seeds, add data per-test</a></li><li><a href="#constantly-inspect-for-vulnerable-dependencies" class="table-of-contents__link">Constantly inspect for vulnerable dependencies</a></li><li><a href="#tag-your-tests" class="table-of-contents__link">Tag your tests</a></li><li><a href="#check-your-test-coverage-it-helps-to-identify-wrong-test-patterns" class="table-of-contents__link">Check your test coverage, it helps to identify wrong test patterns</a></li><li><a href="#inspect-for-outdated-packages" class="table-of-contents__link">Inspect for outdated packages</a></li><li><a href="#use-production-like-environment-for-e2e-testing" class="table-of-contents__link">Use production-like environment for e2e testing</a></li><li><a href="#refactor-regularly-using-static-analysis-tools" class="table-of-contents__link">Refactor regularly using static analysis tools</a></li><li><a href="#carefully-choose-your-ci-platform-jenkins-vs-circleci-vs-travis-vs-rest-of-the-world" class="table-of-contents__link">Carefully choose your CI platform (Jenkins vs CircleCI vs Travis vs Rest of the world)</a></li><li><a href="#test-your-middlewares-in-isolation" class="table-of-contents__link">Test your middlewares in isolation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/coding-standard/docs/intro">Coding Standard</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Linkedln<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://eversoftgroup.com/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 Eversoft.</div></div></div></footer></div>
<script src="/coding-standard/assets/js/runtime~main.e702cba1.js"></script>
<script src="/coding-standard/assets/js/main.662322e1.js"></script>
</body>
</html>