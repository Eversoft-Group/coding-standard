"use strict";(self.webpackChunkcoding_standard=self.webpackChunkcoding_standard||[]).push([[930],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return m}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),p=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(r),m=o,h=d["".concat(c,".").concat(m)]||d[m]||l[m]||a;return r?n.createElement(h,s(s({ref:t},u),{},{components:r})):n.createElement(h,s({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=r[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5971:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),s=["components"],i={sidebar_position:3},c="Project Structure Practices",p={unversionedId:"project-structure-practices/project-structure",id:"project-structure-practices/project-structure",isDocsHomePage:!1,title:"Project Structure Practices",description:"Structure your solution by components",source:"@site/docs/project-structure-practices/project-structure.md",sourceDirName:"project-structure-practices",slug:"/project-structure-practices/project-structure",permalink:"/coding-standard/docs/project-structure-practices/project-structure",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/project-structure-practices/project-structure.md",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Intro",permalink:"/coding-standard/docs/intro"},next:{title:"Variables",permalink:"/coding-standard/docs/naming-convention/variables"}},u=[{value:"Structure your solution by components",id:"structure-your-solution-by-components",children:[]},{value:"Layer your components, keep the web layer within its boundaries",id:"layer-your-components-keep-the-web-layer-within-its-boundaries",children:[]},{value:"Wrap common utilities as npm packages",id:"wrap-common-utilities-as-npm-packages",children:[]},{value:"Separate Express <code>app</code> and <code>server</code>",id:"separate-express-app-and-server",children:[]},{value:"Use environment aware, secure and hierarchical config",id:"use-environment-aware-secure-and-hierarchical-config",children:[]}],l={toc:u};function d(e){var t=e.components,r=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"project-structure-practices"},"Project Structure Practices"),(0,a.kt)("h2",{id:"structure-your-solution-by-components"},"Structure your solution by components"),(0,a.kt)("p",null,"The worst large applications pitfall is maintaining a huge code base with hundreds of dependencies - such a monolith slows down developers as they try to incorporate new features. Instead, partition your code into components, each gets its folder or a dedicated codebase, and ensure that each unit is kept small and simple. Visit 'Read More' below to see examples of correct project structure"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Otherwise:")," When developers who code new features struggle to realize the impact of their change and fear to break other dependent components - deployments become slower and riskier. It's also considered harder to scale-out when all the business units are not separated"),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"layer-your-components-keep-the-web-layer-within-its-boundaries"},"Layer your components, keep the web layer within its boundaries"),(0,a.kt)("p",null,"Each component should contain 'layers' - a dedicated object for the web, logic, and data access code. This not only draws a clean separation of concerns but also significantly eases mocking and testing the system. Though this is a very common pattern, API developers tend to mix layers by passing the web layer objects (e.g. Express req, res) to business logic and data layers - this makes your application dependent on and accessible only by specific web frameworks"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Otherwise:")," App that mixes web objects with other layers cannot be accessed by testing code, CRON jobs, triggers from message queues, etc"),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"wrap-common-utilities-as-npm-packages"},"Wrap common utilities as npm packages"),(0,a.kt)("p",null,"In a large app that constitutes a large codebase, cross-cutting-concern utilities like a logger, encryption and alike, should be wrapped by your code and exposed as private npm packages. This allows sharing them among multiple codebases and projects"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Otherwise:")," You'll have to invent your deployment and the dependency wheel"),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"separate-express-app-and-server"},"Separate Express ",(0,a.kt)("inlineCode",{parentName:"h2"},"app")," and ",(0,a.kt)("inlineCode",{parentName:"h2"},"server")),(0,a.kt)("p",null,"Avoid the nasty habit of defining the entire ",(0,a.kt)("a",{parentName:"p",href:"https://expressjs.com/"},"Express")," app in a single huge file - separate your 'Express' definition to at least two files: the API declaration (app.js) and the networking concerns (WWW). For even better structure, locate your API declaration within components"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Otherwise:")," Your API will be accessible for testing via HTTP calls only (slower and much harder to generate coverage reports). It probably won't be a big pleasure to maintain hundreds of lines of code in a single file"),(0,a.kt)("br",null),(0,a.kt)("h2",{id:"use-environment-aware-secure-and-hierarchical-config"},"Use environment aware, secure and hierarchical config"),(0,a.kt)("p",null,"A perfect and flawless configuration setup should ensure (a) keys can be read from file AND from environment variable (b) secrets are kept outside committed code (c) config is hierarchical for easier findability. There are a few packages that can help tick most of those boxes like ",(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/rc"},"rc"),", ",(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/nconf"},"nconf"),", ",(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/config"},"config"),", and ",(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/convict"},"convict"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Otherwise:")," Failing to satisfy any of the config requirements will simply bog down the development or DevOps team. Probably both"),(0,a.kt)("br",null))}d.isMDXComponent=!0}}]);